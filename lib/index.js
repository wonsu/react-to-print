"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=_interopDefault(require("react")),reactDom=require("react-dom"),propTypes=_interopDefault(require("prop-types")),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},ReactToPrint=function(e){function a(){var e,t,p;classCallCheck(this,a);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=p=possibleConstructorReturn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).handlePrint=function(){var e=p.props,t=e.content,n=e.copyStyles,o=e.onAfterPrint,r=window.open("","Print","status=no, toolbar=no, scrollbars=yes","false");o&&(r.onbeforeunload=o);var a=t(),i=reactDom.findDOMNode(a),l=[].concat(toConsumableArray(i.getElementsByTagName("img"))),c=document.querySelectorAll('link[rel="stylesheet"]');p.imageTotal=l.length,p.imageLoaded=0,p.linkTotal=c.length,p.linkLoaded=0;var s=function(e){"image"===e?p.imageLoaded++:"link"===e&&p.linkLoaded++,p.imageLoaded===p.imageTotal&&p.linkLoaded===p.linkTotal&&p.triggerPrint(r)};if([].concat(toConsumableArray(l)).forEach(function(e){/^data:/.test(e.src)&&(e.crossOrigin="anonymous"),e.setAttribute("src",e.src),e.onload=s.bind(null,"image"),e.onerror=s.bind(null,"image"),e.crossOrigin="use-credentials"}),!1!==n){var u=document.querySelectorAll('style, link[rel="stylesheet"]');[].concat(toConsumableArray(u)).forEach(function(e){var o=(r.contentDocument||r.document).createElement(e.tagName);e.textContent?o.textContent=e.textContent:e.innerText&&(o.innerText=e.innerText),[].concat(toConsumableArray(e.attributes)).forEach(function(e){var t=e.nodeValue;if("href"===e.nodeName&&!1===/^https?:\/\//.test(e.nodeValue)&&!1===/^blob:/.test(e.nodeValue)){var n="../"===e.nodeValue.substr(0,3)?document.location.pathname.replace(/[^/]*$/,""):"/";t=t.replace(/\/+/,""),t=document.location.protocol+"//"+document.location.host+n+t}o.setAttribute(e.nodeName,t)}),"LINK"===e.tagName&&(o.onload=s.bind(null,"link"),o.onerror=s.bind(null,"link")),r.document.head.appendChild(o)})}document.body.className&&document.body.className.split(" ").map(function(e){return r.document.body.classList.add(e)});p.props.bodyClass.length&&r.document.body.classList.add(p.props.bodyClass);var d=r.document.createElement("style");d.appendChild(r.document.createTextNode("@page { size: auto;  margin: 0mm; } @media print { body { -webkit-print-color-adjust: exact; } }")),r.document.head.appendChild(d),r.document.body.innerHTML=i.outerHTML,0!==p.imageTotal&&!1!==n||p.triggerPrint(r),p.props.debug&&(console.log("** DEBUG MODE **"),console.log(r.document))},possibleConstructorReturn(p,t)}return inherits(a,e),createClass(a,[{key:"triggerPrint",value:function(e){var t=this;this.props.onBeforePrint&&this.props.onBeforePrint(),setTimeout(function(){t.props.debug||(e.print(),t.props.closeAfterPrint&&e.close())},500)}},{key:"render",value:function(){var t=this;return React.cloneElement(this.props.trigger(),{ref:function(e){return t.triggerRef=e},onClick:this.handlePrint})}}]),a}(React.Component);ReactToPrint.defaultProps={copyStyles:!0,closeAfterPrint:!0,bodyClass:"",debug:!1},module.exports=ReactToPrint;
//# sourceMappingURL=index.js.map
